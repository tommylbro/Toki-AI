{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tommy\\\\OneDrive\\\\Documents\\\\GitHub\\\\Toki-AI\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n/* global __firebase_config, __app_id, __initial_auth_token */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { getFirestore, collection, onSnapshot, addDoc, serverTimestamp, query, limit, doc, setDoc } from 'firebase/firestore';\nimport { marked } from 'marked';\nimport { createPortal } from 'react-dom';\nimport { Sparkles, MessageSquareMore, Image, LoaderCircle, X, ExternalLink, Menu, Plus, Play, Pause, Mic, Settings, Volume2, PenTool, Copy, User, LogOut, Send } from 'lucide-react';\n\n// --- Firebase Configuration ---\n// The global variables are provided by the Canvas environment.\n// We safely check for their existence and fall back to local dev values if they are not defined.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst localFirebaseConfig = {\n  // Use a placeholder or your own dev keys here if you are running this locally\n  apiKey: \"YOUR_API_KEY\",\n  authDomain: \"YOUR_AUTH_DOMAIN\",\n  projectId: \"YOUR_PROJECT_ID\",\n  storageBucket: \"YOUR_STORAGE_BUCKET\",\n  messagingSenderId: \"YOUR_MESSAGING_SENDER_ID\",\n  appId: \"YOUR_APP_ID\"\n};\nconst localAppId = 'default-app-id';\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : localFirebaseConfig;\nconst appId = typeof __app_id !== 'undefined' ? __app_id : localAppId;\n\n// --- Initialize Firebase Services ---\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// Helper function for sanitizing user input and rendering markdown\nconst renderMarkdown = text => {\n  const sanitizedText = text.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n  return {\n    __html: marked.parse(sanitizedText)\n  };\n};\n\n// Main App Component\nconst App = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const messagesEndRef = useRef(null);\n\n  // --- Authentication and Initialization ---\n  useEffect(() => {\n    // This listener will be called when the auth state changes\n    const unsubscribe = onAuthStateChanged(auth, async currentUser => {\n      if (currentUser) {\n        setUser(currentUser);\n        setUserId(currentUser.uid);\n      } else {\n        // Handle anonymous sign-in for unauthenticated users\n        try {\n          // Use the custom token if available, otherwise sign in anonymously\n          const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n          if (initialAuthToken) {\n            await signInWithCustomToken(auth, initialAuthToken);\n          } else {\n            await signInAnonymously(auth);\n          }\n        } catch (authError) {\n          setError(`Authentication Error: ${authError.message}`);\n          console.error(\"Authentication failed:\", authError);\n        }\n      }\n      setIsAuthReady(true);\n      setLoading(false);\n    });\n\n    // Clean up the listener on component unmount\n    return () => unsubscribe();\n  }, []);\n\n  // --- Firebase Firestore Data Listener ---\n  useEffect(() => {\n    if (isAuthReady) {\n      const messagesRef = collection(db, `artifacts/${appId}/public/data/messages`);\n      const q = query(messagesRef, limit(50));\n      const unsubscribe = onSnapshot(q, snapshot => {\n        var _messagesEndRef$curre;\n        const fetchedMessages = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setMessages(fetchedMessages);\n        (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n          behavior: \"smooth\"\n        });\n      }, err => {\n        console.error(\"Failed to fetch messages:\", err);\n        setError(\"Failed to load messages. Please check your network connection or Firestore security rules.\");\n      });\n      return () => unsubscribe();\n    }\n  }, [isAuthReady, appId, db]);\n\n  // --- Handle sending new messages ---\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (newMessage.trim() === \"\" || !userId) return;\n    try {\n      await addDoc(collection(db, `artifacts/${appId}/public/data/messages`), {\n        text: newMessage,\n        senderId: userId,\n        timestamp: serverTimestamp()\n      });\n      setNewMessage(\"\");\n      setError(null); // Clear any previous errors on successful send\n    } catch (sendError) {\n      console.error(\"Error sending message:\", sendError);\n      setError(\"Failed to send message. Please check your Firestore security rules.\");\n    }\n  };\n\n  // --- UI Rendering ---\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100\",\n      children: /*#__PURE__*/_jsxDEV(LoaderCircle, {\n        className: \"animate-spin h-12 w-12 text-indigo-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user && !loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 w-full max-w-md text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 dark:text-red-400 mb-4\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"bg-indigo-500 text-white p-3 rounded-lg shadow-md hover:bg-indigo-600 transition-colors duration-200\",\n          children: \"Reload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white dark:bg-gray-800 shadow-md p-4 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold\",\n        children: \"Chat App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [userId && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm\",\n          children: [\"User ID: \", userId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => signOut(auth),\n          className: \"p-2 rounded-lg text-red-500 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200\",\n          children: /*#__PURE__*/_jsxDEV(LogOut, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${msg.senderId === userId ? 'justify-end' : 'justify-start'}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `max-w-md rounded-xl p-3 shadow-md ${msg.senderId === userId ? 'bg-indigo-500 text-white rounded-br-none' : 'bg-white dark:bg-gray-700 rounded-bl-none'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            dangerouslySetInnerHTML: renderMarkdown(msg.text),\n            className: \"prose dark:prose-invert\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `block text-xs mt-1 ${msg.senderId === userId ? 'text-indigo-200' : 'text-gray-400'}`,\n            children: msg.senderId === userId ? 'You' : `User ID: ${msg.senderId.substring(0, 8)}...`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)\n      }, msg.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"bg-white dark:bg-gray-800 p-4 shadow-md\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800 flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setError(null),\n          className: \"text-red-700 dark:text-red-800 hover:text-red-900\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSendMessage,\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value),\n          className: \"flex-1 p-3 rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200\",\n          placeholder: \"Type a message...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"bg-indigo-500 text-white p-3 rounded-lg shadow-md hover:bg-indigo-600 transition-colors duration-200\",\n          children: /*#__PURE__*/_jsxDEV(Send, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"mAQ2t7NFq4XZSlb3d++3jG+0BAQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","initializeApp","getAuth","signInWithCustomToken","signInAnonymously","onAuthStateChanged","signOut","getFirestore","collection","onSnapshot","addDoc","serverTimestamp","query","limit","doc","setDoc","marked","createPortal","Sparkles","MessageSquareMore","Image","LoaderCircle","X","ExternalLink","Menu","Plus","Play","Pause","Mic","Settings","Volume2","PenTool","Copy","User","LogOut","Send","jsxDEV","_jsxDEV","localFirebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","localAppId","firebaseConfig","__firebase_config","JSON","parse","__app_id","app","auth","db","renderMarkdown","text","sanitizedText","replace","__html","App","_s","user","setUser","userId","setUserId","messages","setMessages","isAuthReady","setIsAuthReady","loading","setLoading","error","setError","newMessage","setNewMessage","messagesEndRef","unsubscribe","currentUser","uid","initialAuthToken","__initial_auth_token","authError","message","console","messagesRef","q","snapshot","_messagesEndRef$curre","fetchedMessages","docs","map","id","data","current","scrollIntoView","behavior","err","handleSendMessage","e","preventDefault","trim","senderId","timestamp","sendError","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","size","msg","index","dangerouslySetInnerHTML","substring","ref","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/Tommy/OneDrive/Documents/GitHub/Toki-AI/src/App.js"],"sourcesContent":["/* global __firebase_config, __app_id, __initial_auth_token */\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  initializeApp\r\n} from 'firebase/app';\r\nimport {\r\n  getAuth,\r\n  signInWithCustomToken,\r\n  signInAnonymously,\r\n  onAuthStateChanged,\r\n  signOut\r\n} from 'firebase/auth';\r\nimport {\r\n  getFirestore,\r\n  collection,\r\n  onSnapshot,\r\n  addDoc,\r\n  serverTimestamp,\r\n  query,\r\n  limit,\r\n  doc,\r\n  setDoc,\r\n} from 'firebase/firestore';\r\nimport {\r\n  marked\r\n} from 'marked';\r\nimport {\r\n  createPortal\r\n} from 'react-dom';\r\nimport {\r\n  Sparkles,\r\n  MessageSquareMore,\r\n  Image,\r\n  LoaderCircle,\r\n  X,\r\n  ExternalLink,\r\n  Menu,\r\n  Plus,\r\n  Play,\r\n  Pause,\r\n  Mic,\r\n  Settings,\r\n  Volume2,\r\n  PenTool,\r\n  Copy,\r\n  User,\r\n  LogOut,\r\n  Send\r\n} from 'lucide-react';\r\n\r\n// --- Firebase Configuration ---\r\n// The global variables are provided by the Canvas environment.\r\n// We safely check for their existence and fall back to local dev values if they are not defined.\r\nconst localFirebaseConfig = {\r\n  // Use a placeholder or your own dev keys here if you are running this locally\r\n  apiKey: \"YOUR_API_KEY\",\r\n  authDomain: \"YOUR_AUTH_DOMAIN\",\r\n  projectId: \"YOUR_PROJECT_ID\",\r\n  storageBucket: \"YOUR_STORAGE_BUCKET\",\r\n  messagingSenderId: \"YOUR_MESSAGING_SENDER_ID\",\r\n  appId: \"YOUR_APP_ID\",\r\n};\r\n\r\nconst localAppId = 'default-app-id';\r\n\r\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : localFirebaseConfig;\r\nconst appId = typeof __app_id !== 'undefined' ? __app_id : localAppId;\r\n\r\n// --- Initialize Firebase Services ---\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\n\r\n// Helper function for sanitizing user input and rendering markdown\r\nconst renderMarkdown = (text) => {\r\n  const sanitizedText = text.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n  return {\r\n    __html: marked.parse(sanitizedText)\r\n  };\r\n};\r\n\r\n// Main App Component\r\nconst App = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [isAuthReady, setIsAuthReady] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // --- Authentication and Initialization ---\r\n  useEffect(() => {\r\n    // This listener will be called when the auth state changes\r\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n      if (currentUser) {\r\n        setUser(currentUser);\r\n        setUserId(currentUser.uid);\r\n      } else {\r\n        // Handle anonymous sign-in for unauthenticated users\r\n        try {\r\n          // Use the custom token if available, otherwise sign in anonymously\r\n          const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\r\n          if (initialAuthToken) {\r\n            await signInWithCustomToken(auth, initialAuthToken);\r\n          } else {\r\n            await signInAnonymously(auth);\r\n          }\r\n        } catch (authError) {\r\n          setError(`Authentication Error: ${authError.message}`);\r\n          console.error(\"Authentication failed:\", authError);\r\n        }\r\n      }\r\n      setIsAuthReady(true);\r\n      setLoading(false);\r\n    });\r\n\r\n    // Clean up the listener on component unmount\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // --- Firebase Firestore Data Listener ---\r\n  useEffect(() => {\r\n    if (isAuthReady) {\r\n      const messagesRef = collection(db, `artifacts/${appId}/public/data/messages`);\r\n      const q = query(messagesRef, limit(50));\r\n\r\n      const unsubscribe = onSnapshot(q, (snapshot) => {\r\n        const fetchedMessages = snapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data()\r\n        }));\r\n        setMessages(fetchedMessages);\r\n        messagesEndRef.current?.scrollIntoView({\r\n          behavior: \"smooth\"\r\n        });\r\n      }, (err) => {\r\n        console.error(\"Failed to fetch messages:\", err);\r\n        setError(\"Failed to load messages. Please check your network connection or Firestore security rules.\");\r\n      });\r\n\r\n      return () => unsubscribe();\r\n    }\r\n  }, [isAuthReady, appId, db]);\r\n\r\n  // --- Handle sending new messages ---\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (newMessage.trim() === \"\" || !userId) return;\r\n\r\n    try {\r\n      await addDoc(collection(db, `artifacts/${appId}/public/data/messages`), {\r\n        text: newMessage,\r\n        senderId: userId,\r\n        timestamp: serverTimestamp(),\r\n      });\r\n      setNewMessage(\"\");\r\n      setError(null); // Clear any previous errors on successful send\r\n    } catch (sendError) {\r\n      console.error(\"Error sending message:\", sendError);\r\n      setError(\"Failed to send message. Please check your Firestore security rules.\");\r\n    }\r\n  };\r\n\r\n  // --- UI Rendering ---\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100\">\r\n        <LoaderCircle className=\"animate-spin h-12 w-12 text-indigo-500\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user && !loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900 p-4\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 w-full max-w-md text-center\">\r\n          <p className=\"text-red-500 dark:text-red-400 mb-4\">{error}</p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"bg-indigo-500 text-white p-3 rounded-lg shadow-md hover:bg-indigo-600 transition-colors duration-200\"\r\n          >\r\n            Reload\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100\">\r\n      <header className=\"bg-white dark:bg-gray-800 shadow-md p-4 flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Chat App</h1>\r\n        <div className=\"flex items-center space-x-4\">\r\n          {userId && (\r\n            <span className=\"text-sm\">User ID: {userId}</span>\r\n          )}\r\n          <button\r\n            onClick={() => signOut(auth)}\r\n            className=\"p-2 rounded-lg text-red-500 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200\"\r\n          >\r\n            <LogOut size={20} />\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {messages.map((msg, index) => (\r\n          <div key={msg.id} className={`flex ${msg.senderId === userId ? 'justify-end' : 'justify-start'}`}>\r\n            <div\r\n              className={`max-w-md rounded-xl p-3 shadow-md ${\r\n                msg.senderId === userId\r\n                  ? 'bg-indigo-500 text-white rounded-br-none'\r\n                  : 'bg-white dark:bg-gray-700 rounded-bl-none'\r\n              }`}\r\n            >\r\n              <div\r\n                dangerouslySetInnerHTML={renderMarkdown(msg.text)}\r\n                className=\"prose dark:prose-invert\"\r\n              />\r\n              <span className={`block text-xs mt-1 ${msg.senderId === userId ? 'text-indigo-200' : 'text-gray-400'}`}>\r\n                {msg.senderId === userId ? 'You' : `User ID: ${msg.senderId.substring(0, 8)}...`}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        <div ref={messagesEndRef} />\r\n      </main>\r\n\r\n      <footer className=\"bg-white dark:bg-gray-800 p-4 shadow-md\">\r\n        {error && (\r\n            <div className=\"p-3 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800 flex items-center justify-between\">\r\n              <span>{error}</span>\r\n              <button onClick={() => setError(null)} className=\"text-red-700 dark:text-red-800 hover:text-red-900\">\r\n                <X size={16} />\r\n              </button>\r\n            </div>\r\n          )}\r\n        <form onSubmit={handleSendMessage} className=\"flex space-x-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            className=\"flex-1 p-3 rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200\"\r\n            placeholder=\"Type a message...\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"bg-indigo-500 text-white p-3 rounded-lg shadow-md hover:bg-indigo-600 transition-colors duration-200\"\r\n          >\r\n            <Send size={20} />\r\n          </button>\r\n        </form>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
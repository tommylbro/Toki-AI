<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madison AI</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM CDNs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Third-party library for markdown rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.10/marked.min.js"></script>
    <!-- Babel Standalone for JSX compilation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <!-- Firebase CDNs -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
      import { getFirestore, collection, onSnapshot, addDoc, serverTimestamp, query } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
      window.firebase = {
        initializeApp, getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged,
        getFirestore, collection, onSnapshot, addDoc, serverTimestamp, query
      };
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .prose-sm {
            font-size: 0.875rem;
            line-height: 1.5;
        }
        .prose-sm pre {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            white-space: pre-wrap;
        }
        .prose-sm code {
            font-size: 0.8rem;
        }
        .dot-flashing {
            position: relative;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #e2e8f0;
            color: #e2e8f0;
            animation: dot-flashing 1s infinite linear alternate;
            animation-delay: 0.5s;
        }
        .dot-flashing::before, .dot-flashing::after {
            content: '';
            display: inline-block;
            position: absolute;
            top: 0;
        }
        .dot-flashing::before {
            left: -10px;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #e2e8f0;
            color: #e2e8f0;
            animation: dot-flashing 1s infinite linear alternate;
            animation-delay: 0s;
        }
        .dot-flashing::after {
            left: 10px;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #e2e8f0;
            color: #e2e8f0;
            animation: dot-flashing 1s infinite linear alternate;
            animation-delay: 1s;
        }
        @keyframes dot-flashing {
            0% {
                background-color: #e2e8f0;
            }
            50%, 100% {
                background-color: #4a5568;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen p-4">
    <div id="root" class="w-full h-full max-w-4xl"></div>
    <!-- The main application script is now type="text/babel" for JSX support -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const ReactDOM = window.ReactDOM;
        const marked = window.marked;
        const { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged } = window.firebase;
        const { getFirestore, collection, onSnapshot, addDoc, serverTimestamp, query } = window.firebase;

        // Define global variables with fallbacks
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // --- API Keys and Models (Change these) ---
        // IMPORTANT: Replace "YOUR_GEMINI_API_KEY_HERE" with your actual API key
        const API_KEY = "AIzaSyBvD0xGYQpFTND8Eqnh-KWhDA9YKQHZ6jg";
        const TEXT_MODEL = "gemini-2.5-flash-preview-05-20";
        const TTS_MODEL = "gemini-2.5-flash-preview-tts";

        // Helper function to convert base64 to ArrayBuffer
        function base64ToArrayBuffer(base64) {
            const binaryString = atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        }

        // Helper function to convert PCM to WAV format
        function pcmToWav(pcmData, sampleRate) {
            const numChannels = 1;
            const bytesPerSample = 2;
            const blockAlign = numChannels * bytesPerSample;
            const byteRate = sampleRate * blockAlign;
            const dataSize = pcmData.byteLength;
            const buffer = new ArrayBuffer(44 + dataSize);
            const view = new DataView(buffer);

            // RIFF chunk descriptor
            writeString(view, 0, 'RIFF');
            view.setUint32(4, 36 + dataSize, true);
            writeString(view, 8, 'WAVE');

            // fmt chunk
            writeString(view, 12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true); // Audio format (1 = PCM)
            view.setUint16(22, numChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, byteRate, true);
            view.setUint16(32, blockAlign, true);
            view.setUint16(34, 16, true); // Bits per sample

            // data chunk
            writeString(view, 36, 'data');
            view.setUint32(40, dataSize, true);

            // Write the PCM data
            const pcmView = new Int16Array(pcmData);
            for (let i = 0; i < pcmView.length; i++) {
                view.setInt16(44 + i * 2, pcmView[i], true);
            }

            return new Blob([view], { type: 'audio/wav' });
        }

        // Helper function for writing strings to a DataView
        function writeString(view, offset, string) {
            for (let i = 0; i < string.length; i++) {
                view.setUint8(offset + i, string.charCodeAt(i));
            }
        }

        // Custom Icon Components to replace lucide-react
        const BotIcon = ({ size = 24, className = "" }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: className },
                React.createElement('path', { d: "M12 8V4H8" }),
                React.createElement('rect', { width: "16", height: "12", x: "4", y: "8", rx: "2" }),
                React.createElement('path', { d: "M2 14h2" }),
                React.createElement('path', { d: "M20 14h2" }),
                React.createElement('path', { d: "M15 13l2 2" }),
                React.createElement('path', { d: "M7 13l-2 2" }),
                React.createElement('path', { d: "M12 18h.01" }),
                React.createElement('path', { d: "M7 21h10" }),
                React.createElement('path', { d: "M12 4v4" })
            )
        );

        const UserIcon = ({ size = 24, className = "" }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: className },
                React.createElement('path', { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" }),
                React.createElement('circle', { cx: "12", cy: "7", r: "4" })
            )
        );

        const Volume2Icon = ({ size = 24, className = "" }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: className },
                React.createElement('polygon', { points: "11 5 6 9 2 9 2 15 6 15 11 19 11 5" }),
                React.createElement('path', { d: "M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" })
            )
        );

        const ImageIcon = ({ size = 24, className = "" }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: className },
                React.createElement('rect', { width: "18", height: "18", x: "3", y: "3", rx: "2", ry: "2" }),
                React.createElement('circle', { cx: "9", cy: "9", r: "2" }),
                React.createElement('path', { d: "m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" })
            )
        );

        const FileTextIcon = ({ size = 24, className = "" }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: className },
                React.createElement('path', { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" }),
                React.createElement('path', { d: "M14 2v4a2 2 0 0 0 2 2h4" }),
                React.createElement('path', { d: "M10 9H8" }),
                React.createElement('path', { d: "M16 13H8" }),
                React.createElement('path', { d: "M16 17H8" })
            )
        );

        const CodeIcon = ({ size = 24, className = "" }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: className },
                React.createElement('path', { d: "m18 16 4-4-4-4" }),
                React.createElement('path', { d: "m6 8-4 4 4 4" }),
                React.createElement('path', { d: "M14.5 4l-5 16" })
            )
        );

        const SendHorizonalIcon = ({ size = 24, className = "" }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: className },
                React.createElement('path', { d: "m3 3 3 9-3 9 19-9Z" }),
                React.createElement('path', { d: "M6 12h16" })
            )
        );

        const WandIcon = ({ size = 24, className = "" }) => (
            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: className },
                React.createElement('path', { d: "M15 14c.2-.8.8-1.5 1.7-2a4.5 4.5 0 0 0 4.3-5.4A1.68 1.68 0 0 0 21 5.3c-1.3-.1-2.6.2-3.8.9a4.5 4.5 0 0 0-4.3 5.4c-.9.9-1.6 2.4-2 3.8-.7 1.4-.2 2.8.3 3.5.7 1.3 2.1 1.6 3.8 1.6h.4c1.7 0 3.1-.3 4-.7l.3-.2" }),
                React.createElement('path', { d: "m12 10-2-2" }),
                React.createElement('path', { d: "m10 8-2-2" })
            )
        );

        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioContext = AudioContext ? new AudioContext() : null;

        const App = () => {
            const [input, setInput] = useState('');
            const [messages, setMessages] = useState([]);
            const [isAIGenerating, setIsAIGenerating] = useState(false);
            const [isAuthReady, setIsAuthReady] = useState(false);
            const [auth, setAuth] = useState(null);
            const [db, setDb] = useState(null);
            const [userId, setUserId] = useState(null);
            const [isCodeMode, setIsCodeMode] = useState(false);
            const messagesEndRef = useRef(null);

            // Function to handle the authentication and Firestore initialization
            const initializeFirebase = async () => {
                try {
                    const app = window.firebase.initializeApp(firebaseConfig);
                    const authInstance = window.firebase.getAuth(app);
                    const dbInstance = window.firebase.getFirestore(app);
                    setAuth(authInstance);
                    setDb(dbInstance);

                    if (initialAuthToken) {
                        await window.firebase.signInWithCustomToken(authInstance, initialAuthToken);
                    } else {
                        await window.firebase.signInAnonymously(authInstance);
                    }

                    window.firebase.onAuthStateChanged(authInstance, (user) => {
                        if (user) {
                            setUserId(user.uid);
                            setIsAuthReady(true);
                            // Set up Firestore listener after authentication
                            const collectionPath = `/artifacts/${appId}/users/${user.uid}/messages`;
                            const q = window.firebase.query(window.firebase.collection(dbInstance, collectionPath));
                            onSnapshot(q, (querySnapshot) => {
                                const msgs = [];
                                querySnapshot.forEach((doc) => {
                                    msgs.push(doc.data());
                                });
                                // Sort messages in JavaScript to avoid Firestore index errors
                                msgs.sort((a, b) => a.timestamp - b.timestamp);
                                setMessages(msgs);
                            });
                        } else {
                            // Signed out
                            setUserId(null);
                            setIsAuthReady(false);
                        }
                    });
                } catch (error) {
                    console.error("Error initializing Firebase:", error);
                }
            };

            useEffect(() => {
                if (Object.keys(firebaseConfig).length > 0) {
                    initializeFirebase();
                } else {
                    console.error("Firebase config is not available.");
                }
            }, [initialAuthToken, firebaseConfig]);

            useEffect(() => {
                // Scroll to the bottom of the messages div whenever messages change
                if (messagesEndRef.current) {
                    messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });
                }
            }, [messages]);

            const handleSendMessage = async (prompt, isCode = false) => {
                if (!prompt.trim() || !isAuthReady) return;

                const userMessage = {
                    role: 'user',
                    content: prompt,
                    timestamp: new Date().toISOString(),
                    isCode,
                };

                // Add user message to Firestore
                try {
                    const collectionPath = `/artifacts/${appId}/users/${userId}/messages`;
                    await addDoc(collection(db, collectionPath), {
                        ...userMessage,
                        timestamp: serverTimestamp(),
                    });
                } catch (error) {
                    console.error("Error writing user message to Firestore:", error);
                }

                setInput('');
                setIsAIGenerating(true);

                let chatHistory = messages.map(msg => ({
                    role: msg.role,
                    parts: [{ text: msg.content }]
                }));

                chatHistory.push({ role: 'user', parts: [{ text: prompt }] });

                const payload = {
                    contents: chatHistory,
                };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${TEXT_MODEL}:generateContent?key=${API_KEY}`;

                // Exponential backoff for API calls
                const fetchWithRetry = async (url, options, retries = 5) => {
                    for (let i = 0; i < retries; i++) {
                        try {
                            const response = await fetch(url, options);
                            if (response.status === 429 && i < retries - 1) { // Too Many Requests
                                const delay = Math.pow(2, i) * 1000;
                                await new Promise(resolve => setTimeout(resolve, delay));
                                continue;
                            }
                            return response;
                        } catch (error) {
                            if (i < retries - 1) {
                                const delay = Math.pow(2, i) * 1000;
                                await new Promise(resolve => setTimeout(resolve, delay));
                                continue;
                            }
                            throw error;
                        }
                    }
                };

                try {
                    const response = await fetchWithRetry(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload),
                    });

                    const result = await response.json();
                    let aiText = "I am sorry, I couldn't process that request.";
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        aiText = result.candidates[0].content.parts[0].text;
                    }

                    const aiMessage = {
                        role: 'ai',
                        content: aiText,
                        timestamp: new Date().toISOString(),
                    };

                    // Add AI message to Firestore
                    const collectionPath = `/artifacts/${appId}/users/${userId}/messages`;
                    await addDoc(collection(db, collectionPath), {
                        ...aiMessage,
                        timestamp: serverTimestamp(),
                    });
                } catch (error) {
                    console.error("Error fetching AI response:", error);
                } finally {
                    setIsAIGenerating(false);
                }
            };

            const handleKeyDown = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (isCodeMode) {
                        handleExplainCode();
                    } else {
                        handleRefineWriting();
                    }
                }
            };

            const handleRefineWriting = () => {
                handleSendMessage(input);
            };

            const handleExplainCode = () => {
                handleSendMessage(input, true);
            };

            const handleTextToSpeech = async (text) => {
                if (!audioContext || !text) return;

                const payload = {
                    contents: [{
                        parts: [{ text }]
                    }],
                    generationConfig: {
                        responseModalities: ["AUDIO"],
                        speechConfig: {
                            voiceConfig: {
                                prebuiltVoiceConfig: { voiceName: "Puck" }
                            }
                        }
                    },
                };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${TTS_MODEL}:generateContent?key=${API_KEY}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();
                    
                    // Safely access nested properties without optional chaining
                    const audioData = result && result.candidates && result.candidates[0] &&
                                     result.candidates[0].content && result.candidates[0].content.parts &&
                                     result.candidates[0].content.parts[0] &&
                                     result.candidates[0].content.parts[0].inlineData &&
                                     result.candidates[0].content.parts[0].inlineData.data;

                    const mimeType = result && result.candidates && result.candidates[0] &&
                                     result.candidates[0].content && result.candidates[0].content.parts &&
                                     result.candidates[0].content.parts[0] &&
                                     result.candidates[0].content.parts[0].inlineData &&
                                     result.candidates[0].content.parts[0].inlineData.mimeType;

                    if (audioData && mimeType && mimeType.startsWith("audio/")) {
                        const sampleRateMatch = mimeType.match(/rate=(\d+)/);
                        const sampleRate = sampleRateMatch ? parseInt(sampleRateMatch[1], 10) : 16000;
                        const pcmData = base64ToArrayBuffer(audioData);
                        const pcm16 = new Int16Array(pcmData);
                        const wavBlob = pcmToWav(pcm16, sampleRate);
                        const audioUrl = URL.createObjectURL(wavBlob);
                        
                        const audio = new Audio(audioUrl);
                        audio.play();
                    } else {
                        console.error("TTS failed: No valid audio data in response.");
                    }
                } catch (error) {
                    console.error("Error during TTS generation:", error);
                }
            };

            return (
                <div className="flex flex-col h-full bg-gray-900 rounded-lg shadow-2xl overflow-hidden max-w-4xl mx-auto">
                    {/* Header */}
                    <div className="flex items-center justify-between p-4 bg-gray-800 border-b border-gray-700">
                        <div className="flex items-center space-x-2">
                            <BotIcon className="text-indigo-400" size={28} />
                            <h1 className="text-xl font-bold text-white">Madison AI</h1>
                        </div>
                        <div className="text-xs text-gray-400">
                            User ID: {userId || 'Authenticating...'}
                        </div>
                    </div>

                    {/* Chat Window */}
                    <div className="flex-1 p-4 overflow-y-auto space-y-4" style={{ WebkitOverflowScrolling: 'touch' }}>
                        {messages.length === 0 && !isAIGenerating && (
                            <div className="text-center text-gray-500 py-10">
                                <p>Start a conversation with Madison AI.</p>
                                <p>Ask me to refine your writing or explain code.</p>
                            </div>
                        )}
                        {messages.map((msg, index) => (
                            <div
                                key={index}
                                className={`flex items-start space-x-3 ${msg.role === 'user' ? 'justify-end' : ''}`}
                            >
                                {msg.role === 'ai' && <BotIcon className="flex-shrink-0 text-indigo-400 mt-1" />}
                                <div className={`relative p-3 rounded-xl max-w-[80%] ${msg.role === 'user'
                                    ? 'bg-indigo-600 text-white rounded-br-none'
                                    : 'bg-gray-700 text-gray-100 rounded-bl-none'
                                    }`}>
                                    <div
                                        className="prose prose-sm prose-invert"
                                        dangerouslySetInnerHTML={{
                                            __html: msg.isCode ? marked.parse('```javascript\n' + msg.content + '\n```') : marked.parse(msg.content)
                                        }}
                                    ></div>
                                    {msg.role === 'ai' && !isAIGenerating && (
                                        <button
                                            onClick={() => handleTextToSpeech(msg.content)}
                                            className="absolute bottom-1 right-1 bg-gray-600 p-1 rounded-full text-gray-200 hover:text-white transition-colors"
                                        >
                                            <Volume2Icon size={16} />
                                        </button>
                                    )}
                                </div>
                                {msg.role === 'user' && <UserIcon className="flex-shrink-0 text-gray-400 mt-1" />}
                            </div>
                        ))}
                        {isAIGenerating && (
                            <div className="flex items-start space-x-3">
                                <BotIcon className="flex-shrink-0 text-indigo-400 mt-1" />
                                <div className="p-3 bg-gray-700 rounded-xl rounded-bl-none">
                                    <div className="dot-flashing"></div>
                                </div>
                            </div>
                        )}
                        <div ref={messagesEndRef} />
                    </div>

                    {/* Input Area */}
                    <div className="p-4 bg-gray-800 border-t border-gray-700">
                        <div className="relative flex items-center bg-gray-700 rounded-full shadow-lg">
                            <textarea
                                value={input}
                                onChange={(e) => setInput(e.target.value)}
                                onKeyDown={handleKeyDown}
                                className="w-full pl-6 pr-24 py-3 bg-transparent text-white placeholder-gray-400 rounded-full focus:outline-none resize-none overflow-hidden"
                                placeholder={isCodeMode ? "Enter code to explain..." : "Refine your writing..."}
                                rows={1}
                                style={{ height: 'auto', minHeight: '48px' }}
                            ></textarea>
                            <div className="absolute right-2 flex items-center space-x-2">
                                <button
                                    className="p-2 bg-gray-600 text-white rounded-full shadow-lg hover:bg-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm flex items-center gap-1"
                                    onClick={() => setIsCodeMode(!isCodeMode)}
                                >
                                    {isCodeMode ? (
                                        <React.Fragment>
                                            <FileTextIcon size={16} />
                                            <span className="font-semibold">Writing Mode</span>
                                        </React.Fragment>
                                    ) : (
                                        <React.Fragment>
                                            <CodeIcon size={16} />
                                            <span className="font-semibold">Code Mode</span>
                                        </React.Fragment>
                                    )}
                                </button>
                                {isCodeMode ? (
                                    <button
                                        className="p-2 bg-indigo-600 text-white rounded-full shadow-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm flex items-center gap-1"
                                        onClick={handleExplainCode}
                                        disabled={isAIGenerating || !input.trim() || !isAuthReady}
                                    >
                                        <CodeIcon size={16} />
                                        <span className="font-semibold">✨ Explain Code</span>
                                    </button>
                                ) : (
                                    <button
                                        className="p-2 bg-indigo-600 text-white rounded-full shadow-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm flex items-center gap-1"
                                        onClick={handleRefineWriting}
                                        disabled={isAIGenerating || !input.trim() || !isAuthReady}
                                    >
                                        <WandIcon size={16} />
                                        <span className="font-semibold">✨ Refine Writing</span>
                                    </button>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App, null));
    </script>
</body>
</html>
